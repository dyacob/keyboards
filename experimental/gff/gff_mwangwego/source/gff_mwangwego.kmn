store(&Version) '15.0'
store(&KEYBOARDVERSION) '0.9'
store(&NAME) 'Mwangwego'
store(&COPYRIGHT) '© 2024 Geʾez Frontier Foundation'
store(&Message) 'This is an experimental Mwangwego keyboard that requires the included Mwangwego12 font.'
store(&CapsAlwaysOff) '1'
store(&HotKey) '[CTRL ALT K_M]'
store(&VISUALKEYBOARD) 'gff_mwangwego.kvks'
store(&TARGETS) 'windows macosx linux'
store(&BITMAP) 'gff_mwangwego.ico'

store(ShortA) 'Aa'
store(ShortE) 'Ee'
store(ShortI) 'Ii'
store(ShortO) 'Oo'
store(ShortU) 'Uu'
c
c Chichewa Digraphs
c
c store(H_Modifier) 'Hh'
c store(H_DigraphBases) ''
c store(H_DigraphTargets) ''
c store(L_Modifier) 'Ll'
c store(L_DigraphBases) ''
c store(L_DigraphTargets) ''
c store(S_Modifier) 'Ss'
c store(S_DigraphBases) ''
c store(S_DigraphTargets) ''
c store(Y_Modifier) 'Yy'
c store(Y_DigraphBases) ''
c store(Y_DigraphTargets) ''
c store(Z_Modifier) 'Zz'
c store(Z_DigraphBases) ''
c store(Z_DigraphTargets) ''

c
c the below is the set of non-diagraphs when the digraph based approach is used.
c
c store(OrdersConsonantsRegular) ''
c store(OrdersShortA) ''
c store(OrdersShortE) ''
c store(OrdersShortI) ''
c store(OrdersShortO) ''
c store(OrdersShortU) ''
store(OrdersConsonants) ''

store(VowelKeys) 'AaEeIiOoUu'
store(Vowels) ''
store(Masiri) ''
store(MasiriKeys) 'EeIiOoUu'
store(FirstOrderKeys) 'Aa'

store(MwangwegoLowercaseKeys) 'bcdfghjklmnprstvwyzxq'
store(MwangwegoLowercaseConsonants) ''

store(MwangwegoUppercaseKeys) 'BCDFGHJKLMNPRSTVWYZXQ'
store(MwangwegoUppercaseConsonants) ''

store(Mutuyo) ''
store(MutuyoRegular) ''
store(MutuyoCombining) ''

c    = 1  / MYU
c    = 2  / MI
c    = 3  / NI
c    = 4  / HI
c    = 5  / WAYA
c    = 6  / WAYA Below (combining)
c    = 7  / SISA
c    = 8  / MURA  (combining)
c    = 9  / MULA (combining)
c    = 0  / PEWA (combining)
c    = -  / TUMBA
c    = =  / KWANTHU (combining)

store(MutuyoRegularNumberKeys) '123457-'
store(MutuyoCombiningNumberKeys) '6890='

begin Unicode > use(main)
group(main) using keys

c
c Chichewa Digraphs
c
c any(H_DigraphBases) + any(H_Modifier)  > index(H_DigraphTargets,1)
c any(L_DigraphBases) + any(L_Modifier)  > index(L_DigraphTargets,1)
c any(S_DigraphBases) + any(S_Modifier)  > index(S_DigraphTargets,1)
c any(Y_DigraphBases) + any(Y_Modifier)  > index(Y_DigraphTargets,1)


+ any(MwangwegoLowercaseKeys) > index(MwangwegoUppercaseConsonants,1)
+ any(MwangwegoUppercaseKeys) > index(MwangwegoUppercaseConsonants,1)

'' + 't' > ''

c any(OrdersConsonants) + any(ShortA) > index(OrdersShortA,1)
c any(OrdersConsonants) + any(ShortU) > index(OrdersShortU,1)
c any(OrdersConsonants) + any(ShortI) > index(OrdersShortI,1)
c any(OrdersConsonants) + any(ShortE) > index(OrdersShortE,1)
c any(OrdersConsonants) + any(ShortO) > index(OrdersShortO,1)

c
c Masiri can only follow the first order ("A") or a Mutuyo
c
any(OrdersConsonants) + any(FirstOrderKeys) > context
any(OrdersConsonants) + any(MasiriKeys)     > context index(Masiri,2)
any(Mutuyo) + any(MasiriKeys)               > context index(Masiri,2)

c
c  These next two rules will change when the fonts are updated to present the visual order:
c
any(OrdersConsonants) + any(MutuyoRegularNumberKeys)   > index(MutuyoRegular,2) context
any(OrdersConsonants) + any(MutuyoCombiningNumberKeys) > context index(MutuyoCombining,2)

+ any(VowelKeys) > index(Vowels,1)


'' any(OrdersConsonants) + '3' > '' context(2)
'' any(OrdersConsonants) + '4' > '' context(2)
'' any(OrdersConsonants) + '5' > '' context(2)
'' any(OrdersConsonants) + '4' > '' context(2)
'' any(OrdersConsonants) + '5' > '' context(2)

'' + '' > ''
'' + '' > ''
'' + '' > ''
'' + '' > ''
'' + '' > ''


+ [RALT K_1] > '1'
+ [RALT K_2] > '2'
+ [RALT K_3] > '3'
+ [RALT K_4] > '4'
+ [RALT K_5] > '5'
+ [RALT K_6] > '6'
+ [RALT K_7] > '7'
+ [RALT K_8] > '8'
+ [RALT K_9] > '9'
+ [RALT K_0] > '0'
+ [RALT K_HYPHEN] > '-'
+ [RALT K_EQUALS] > '='
